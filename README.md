# QRKot

QRKot — это приложение для управления благотворительными проектами и пожертвованиями. Пользователи могут создавать проекты, вносить пожертвования, а средства автоматически распределяются между незавершёнными проектами.

## Функционал

- **Управление благотворительными проектами**:
  - Создание, обновление и удаление проектов.
  - Автоматическое распределение пожертвований на открытые проекты.
  - Возможность редактирования только определённых полей проекта.
  - Возможность вывода отчета по скорости закрытия проектов.

- **Управление пожертвованиями**:
  - Пользователи могут делать пожертвования.
  - Поддержка нескольких пожертвований от одного пользователя.
  - Отдельный доступ для суперпользователей для просмотра всех пожертвований.

- **Права доступа**:
  - Обычные пользователи могут создавать пожертвования.
  - Суперпользователи имеют доступ ко всем данным.

## Установка и запуск

1. **Клонируйте репозиторий**:
   ```bash
   git@github.com:IlyaPryzhykau/cat_charity_fund.git
   cd cat_charity_fund
   ```
   
2. **Установите зависимости: Рекомендуется использовать виртуальное окружение**:
   ```bash
   python -m venv venv
   source venv/bin/activate  # Linux/Mac
   venv\Scripts\activate     # Windows
   pip install -r requirements.txt
   ```
   
3. **Примените миграции**:
   ```bash
   alembic upgrade head
   ```
   
4. **Запустите сервер**:
   ```bash
   uvicorn app.main:app --reload
   ```
   
5. **Откройте документацию: API-документация доступна по адресу http://127.0.0.1:8000/docs.**


## Структура проекта:

- app/
    - models/ — Определения таблиц базы данных.
    - crud/ — CRUD-операции для моделей.
    - schemas/ — Схемы для проверки данных.
    - api/ — Маршруты и обработчики запросов.
    - core/ — Настройки и вспомогательные функции.
    - cervices/ — Вспомогательные функции.
- tests/ — Тесты для проверки функциональности.


## Примеры запросов

**Создание проекта (POST /charity_project/)**

```json
    {
     "name": "Котятам на НГ",
     "description": "На вкусняхи!",
     "full_amount": 100000000
    }
```

```json
    {
      "name": "Котятам на НГ",
      "description": "На вкусняхи!",
      "full_amount": 100000000,
      "id": 2,
      "invested_amount": 0,
      "fully_invested": false,
      "create_date": "2024-12-23T22:06:37.003797"
    }
```

**Создание пожертвования (POST /donation/)**

```json
    {
      "full_amount": 5000000000,
      "comment": "нака"
    }
```

```json
    {
      "full_amount": 5000000000,
      "comment": "нака",
      "id": 2,
      "create_date": "2024-12-23T22:09:16.275002"
    }
```

**Получение отчета о скорости закрытия проектов, а так же создание таблицы (GET /google/)**

```json
[
  {
    "name": "111",
    "description": "На НГ!",
    "duration_days": "0.2"
  },
  {
    "name": "попкорн",
    "description": "по сериальчик",
    "duration_days": "0.9"
  },
  {
    "name": "Котятам на НГ",
    "description": "На вкусняхи!",
    "duration_days": "4.0"
  }
]
```
